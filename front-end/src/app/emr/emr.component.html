<div class="patient-details-container">
    <!-- Patient Information -->
    <section class="patient-info">
      <h2>Patient Information</h2>
      <p><strong>ID:</strong> {{ patient?.patient_id }}</p>
      <p><strong>Full Name:</strong> {{ patient?.full_name }}</p>
      <p><strong>Birth Date:</strong> {{ patient?.birth_date }}</p>
      <p><strong>Gender:</strong> {{ patient?.gender }}</p>
      <p><strong>Encounters:</strong> {{ patient?.encounter_count }}</p>
      <p><strong>Conditions:</strong> {{ patient?.condition_count }}</p>
      <p><strong>Observations:</strong> {{ patient?.observation_count }}</p>
      <p><strong>Medication Requests:</strong> {{ patient?.request_count }}</p>
      <p><strong>Procedures:</strong> {{ patient?.procedure_count }}</p>
      <p><strong>Immunizations:</strong> {{ patient?.immunization_count }}</p>
      <p><strong>Care Plans:</strong> {{ patient?.careplan_count }}</p>
    </section>
  
    <!-- Expansion Panel for Encounters -->
    <mat-accordion>
      <mat-expansion-panel>
        <mat-expansion-panel-header>
          <mat-panel-title>Encounters</mat-panel-title>
        </mat-expansion-panel-header>
  
        <table mat-table [dataSource]="encounters" class="mat-elevation-z8">
          <ng-container matColumnDef="encounter_id">
            <th mat-header-cell *matHeaderCellDef>Encounter ID</th>
            <td mat-cell *matCellDef="let encounter">{{ encounter.encounter_id }}</td>
          </ng-container>
  
          <ng-container matColumnDef="start_date">
            <th mat-header-cell *matHeaderCellDef>Start Date</th>
            <td mat-cell *matCellDef="let encounter">{{ encounter.start_date }}</td>
          </ng-container>
  
          <ng-container matColumnDef="end_date">
            <th mat-header-cell *matHeaderCellDef>End Date</th>
            <td mat-cell *matCellDef="let encounter">{{ encounter.end_date }}</td>
          </ng-container>
  
          <ng-container matColumnDef="status">
            <th mat-header-cell *matHeaderCellDef>Status</th>
            <td mat-cell *matCellDef="let encounter">{{ encounter.status }}</td>
          </ng-container>
  
          <ng-container matColumnDef="actions">
            <th mat-header-cell *matHeaderCellDef>Actions</th>
            <td mat-cell *matCellDef="let encounter">
              <button mat-button (click)="viewEncounterDetails(encounter.encounter_id)">
                View Details
              </button>
            </td>
          </ng-container>
  
          <tr mat-header-row *matHeaderRowDef="['encounter_id', 'start_date', 'end_date', 'status', 'actions']"></tr>
          <tr mat-row *matRowDef="let row; columns: ['encounter_id', 'start_date', 'end_date', 'status', 'actions']"></tr>
        </table>
      </mat-expansion-panel>
  
      <!-- Expansion Panel for Encounter Details -->
      <mat-expansion-panel *ngIf="encounterDetails">
        <mat-expansion-panel-header>
          <mat-panel-title>Encounter Details</mat-panel-title>
        </mat-expansion-panel-header>
  
        <p><strong>ID:</strong> {{ encounterDetails?.encounter_id }}</p>
        <p><strong>Start Date:</strong> {{ encounterDetails?.start_date }}</p>
        <p><strong>End Date:</strong> {{ encounterDetails?.end_date }}</p>
        <p><strong>Status:</strong> {{ encounterDetails?.status }}</p>
        <p><strong>Observations:</strong> {{ encounterDetails?.observation_count }}</p>
        <p><strong>Medication Requests:</strong> {{ encounterDetails?.request_count }}</p>
        <p><strong>Procedures:</strong> {{ encounterDetails?.procedure_count }}</p>
      </mat-expansion-panel>
    </mat-accordion>
  </div>
  